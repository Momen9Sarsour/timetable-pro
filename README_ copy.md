يا غالي، تكرم عيونك! هذا طلب مهم جداً لتوثيق المشروع. سأقوم بإعداد شرح مفصل وممل لكل جزئية أنجزناها، مكتوب بطريقة واضحة ومناسبة لملف README.md.

توثيق مشروع نظام الجدولة الآلي (Timetable Pro)
مقدمة

هذا المشروع هو نظام ويب متكامل يهدف إلى أتمتة عملية إنشاء الجداول الدراسية الأكاديمية باستخدام الخوارزميات الجينية (Genetic Algorithms). تم بناء النظام باستخدام إطار عمل Laravel للـ Backend و Bootstrap لواجهة المستخدم، مع واجهة برمجية (API) جاهزة للتكامل مع تطبيقات خارجية مثل Flutter.

فيما يلي تفصيل شامل للوحدات والميزات التي تم إنجازها حتى الآن في النظام.

أولاً: إدارة البيانات الأساسية (Data Management Core)

تم بناء بنية تحتية قوية لإدارة جميع البيانات الأساسية التي يعتمد عليها النظام، مع التركيز على المرونة، دقة البيانات، وتجربة المستخدم السهلة. كل الوحدات التالية تدعم عمليات CRUD الكاملة (إضافة، عرض، تعديل، حذف) عبر واجهة ويب (Web) وواجهة برمجية (API)، بالإضافة إلى دعم الرفع بالجملة من ملفات Excel.

1. إدارة الأقسام (Departments)

الوصف: وحدة لإدارة الأقسام الأكاديمية في المؤسسة.

الميزات:

CRUD كامل: إضافة، عرض (مع Pagination)، تعديل، وحذف الأقسام.

الرفع بالجملة (Excel): إمكانية استيراد قائمة كاملة بالأقسام دفعة واحدة.

تحديث ذكي: عند الرفع من Excel، يقوم النظام بالتحقق من "رقم القسم". إذا كان موجوداً، يتم تحديث بياناته. إذا لم يكن موجوداً، يتم إنشاء سجل جديد، مما يمنع تكرار البيانات ويضمن تحديثها.

2. إدارة الأنواع والفئات (Data Taxonomies)

الوصف: تم بناء وحدات منفصلة لإدارة التصنيفات الأساسية في النظام، مما يجعله مرناً وقابلاً للتوسع.

الوحدات المنجزة:

أنواع القاعات (Room Types): لتعريف أنواع القاعات (مثل: قاعة محاضرات، مختبر حاسوب، ورشة عمل).

فئات المواد (Subject Categories): لتحديد طبيعة المادة (نظري، عملي، أو نظري وعملي "مشترك"). هذا التصنيف هو أساس التقسيم الذكي للشعب لاحقاً.

أنواع المواد (Subject Types): لتصنيف المواد أكاديمياً (متطلب جامعة، متطلب كلية، إجباري، اختياري...).

الميزات:

CRUD كامل لكل وحدة.

دعم الرفع بالجملة (Excel) لكل وحدة.

المرونة: تسمح للمسؤول بإضافة تصنيفات جديدة بسهولة في المستقبل دون الحاجة لتعديل الكود.

3. إدارة القاعات (Rooms)

الوصف: وحدة لإدارة جميع القاعات الدراسية والمختبرات.

الميزات:

بيانات شاملة: تخزين رقم القاعة، اسمها، سعتها القصوى من الطلاب، نوعها (من قائمة Room Types)، الفرع، وتخصيصها (ذكور، إناث، مختلط).

الرفع بالجملة (Excel).

الأهمية: حقل "السعة" (room_size) يعتبر من القيود الصارمة (Hard Constraint) التي تستخدمها الخوارزمية الجينية لضمان عدم جدولة شعبة في قاعة أصغر من حجمها.

4. إدارة المواد الدراسية (Subjects)

الوصف: وحدة متقدمة لإدارة المواد الدراسية، وهي قلب المنهج الأكاديمي.

الميزات:

تفاصيل دقيقة: تخزين كل بيانات المادة (رقمها، اسمها، ساعاتها المعتمدة، وساعاتها الأسبوعية مقسمة إلى نظري وعملي).

سعة الشعبة المخصصة (ميزة جوهرية): تم إضافة حقلين في جدول المواد (capacity_theoretical_section و capacity_practical_section) للسماح للمسؤول بتحديد السعة القصوى للشعبة لكل مادة على حدة.

القيم الافتراضية: إذا لم يقم المسؤول بتحديد سعة شعبة لمادة معينة، يستخدم النظام قيماً افتراضية (مثلاً 50 للنظري، 25 للعملي).

الرفع بالجملة (Excel).

5. إدارة الخطط الدراسية (Plans & Plan Subjects Management)

الوصف: نظام متكامل لإدارة الخطط الدراسية وتوزيع المواد عليها.

الميزات:

CRUD للخطط: إدارة معلومات الخطة الأساسية (رقمها، اسمها، سنة اعتمادها، القسم التابع له).

واجهة تفاعلية لإدارة مواد الخطة: صفحة مخصصة لكل خطة تسمح للمسؤول بإضافة وحذف المواد لكل مستوى وفصل دراسي.

رفع بالجملة ذكي (Excel): ميزة قوية لرفع مواد خطة معينة من ملف واحد.

معالجة ذكية للبيانات: عند الرفع، يتعامل النظام مع مدخلات مختلفة (ID، رقم، أو اسم) للمادة والخطة والمستوى والفصل.

معالجة النصوص المتقدمة: يتجاهل النظام حالة الأحرف (كبيرة/صغيرة) والهمزات المختلفة (أ, إ, ا) عند البحث، مما يمنع الأخطاء والتكرار.

تقارير أخطاء واضحة: بعد الرفع بالجملة، يقدم النظام تقريراً مفصلاً بعدد السجلات التي تم إنشاؤها، والتي كانت موجودة مسبقاً، وتفاصيل عن أي صفوف تم تجاهلها وسبب التجاهل.

6. إدارة الفترات الزمنية (Timeslots)

الوصف: وحدة لإدارة شبكة الأسبوع الدراسي والفترات الزمنية المتاحة.

الميزات:

توليد آلي: زر مخصص يسمح للمستخدم بتوليد كل الفترات الزمنية للأسبوع بضغطة زر، عن طريق تحديد أيام الدوام، ووقت البدء والنهاية، ومدة المحاضرة والاستراحة.

منع التداخل (Overlap Prevention): عند الإضافة أو التعديل اليدوي، يتحقق النظام من عدم وجود أي تداخل زمني بين الفترات، مما يضمن سلامة البيانات.

تحكم كامل: إمكانية إضافة أو تعديل أو حذف أي فترة زمنية بشكل فردي.

7. إدارة تعيينات المدرسين (Instructor Subject & Section Assignments)

الإنجاز: تم بناء آليتين متكاملتين ومرنتين لتوزيع العبء التدريسي.

الميزات:

تعيين المواد (عام): واجهة لتحديد مجموعة المواد التي يستطيع كل مدرس تدريسها.

تعيين الشعب (مفصل): واجهة احترافية تسمح بتعيين شعب محددة لمدرس معين، مما يسمح لمدرسين مختلفين بتدريس شعب مختلفة لنفس المادة.

واجهة ذكية: تعرض المواد بشكل هرمي وتحتها شعبها، مع منع تعيين شعبة معينة مسبقاً لمدرس آخر.

الرفع بالجملة (Excel): دعم رفع تعيينات المواد للمدرسين من ملف Excel.

8. إدارة الشعب (Sections)

الوصف: آلية متكاملة وقوية لتحديد وإنشاء شعب المواد، وهي الخطوة الأخيرة قبل توليد الجدول.

الميزات:

تقسيم آلي ذكي: بناءً على الأعداد المتوقعة للطلاب، يقوم النظام تلقائياً (عبر زر مخصص) باقتراح تقسيم للشعب.

يعتمد على سعة المادة: يستخدم السعة المحددة لكل مادة (النظرية والعملية) أو القيم الافتراضية.

منطق لتجنب الشعب الصغيرة: يحاول النظام دمج الطلاب وتجنب إنشاء شعب بعدد قليل جداً (أقل من 10).

فصل الأنشطة: للمواد "النظرية والعملية"، يقوم النظام بإنشاء شعب نظرية (عادةً شعبة واحدة كبيرة) وشعب عملية (عدة شعب صغيرة) بشكل منفصل للمادة نفسها، مع تمييزها في قاعدة البيانات.

تحكم كامل للمستخدم: بعد التوليد الآلي، يمكن لرئيس القسم مراجعة كل شعبة وتعديلها (عدد الطلاب، رقمها)، أو حذفها، أو إضافة شعب جديدة يدوياً.

ثانياً: الخوارزمية الجينية (Genetic Algorithm)

تم بناء الهيكل الكامل للخوارزمية، وهي الآن قادرة على العمل بشكل متكامل في الخلفية.

بنية قاعدة البيانات:

تم إنشاء جداول مخصصة (Populations, Chromosomes, Genes, Crossovers, Selection_Types) لتخزين كل تفاصيل عملية التشغيل، وتتبع تطور الأجيال، وتخزين كل حل مقترح.

التشغيل في الخلفية (Queues & Jobs):

تم حل مشكلة الوقت الطويل للتنفيذ (Maximum execution time exceeded).

عندما يضغط المستخدم "Start Generation"، يتم إرسال مهمة (Job) إلى طابور (Queue) لتعمل في الخلفية، مما يحرر واجهة المستخدم ويسمح للخوارزمية بالعمل للمدة التي تحتاجها.

آلية العمل المنجزة:

الجيل الأول: يتم إنشاء جيل أول من الجداول العشوائية "بذكاء" (حيث يتم اختيار مدرسين وقاعات مناسبة لنوع الشعبة).

تقييم الجودة (Fitness Function): تم بناء دالة تقييم قوية تحسب "قيمة العقوبة" (penalty_value) لكل جدول بناءً على مجموعة من القيود الصارمة (Hard Constraints) مثل:

تعارض الوقت (للمدرس، القاعة، الشعبة).

تجاوز سعة القاعة.

عدم تطابق نوع القاعة مع نوع الشعبة (نظري/عملي).

عدم أهلية المدرس لتدريس المادة.

الاختيار (Selection): تم تطبيق طريقة "اختيار البطولة" (Tournament Selection).

التزاوج (Crossover): تم تطبيق طريقة "القص من نقطة واحدة" (Single-Point Crossover).

الطفرة (Mutation): تم تطبيق طفرات ذكية تقوم بتغيير (الوقت، القاعة، أو المدرس) بشكل عشوائي ومنطقي.

حلقة الأجيال: الخوارزمية الآن تعمل بشكل كامل عبر عدة أجيال، وتقوم بتحسين جودة الجداول تدريجياً.

المرونة: النظام جاهز لإضافة طرق اختيار وتزاوج جديدة بسهولة في المستقبل من خلال الجداول المخصصة لها.

ثالثاً: عرض النتائج

صفحة تحليل النتائج:

تم بناء صفحة لعرض نتائج عمليات التشغيل السابقة.

تعرض تلقائياً أفضل 5 حلول (جداول) من آخر عملية تشغيل ناجحة، مرتبة حسب الجودة.

تسمح للمستخدم بالانتقال لعرض تفصيلي لأي جدول من هذه الحلول.

صفحة العرض التفصيلي للجدول:

تم بناء صفحة تعرض الجدول الدراسي الكامل في شكل شبكة أسبوعية.

تمييز التعارضات: يتم تحليل الجدول وعرض قائمة بالتعارضات الموجودة فيه، ويتم تلوين المحاضرات المتعارضة باللون الأحمر مباشرة على الجدول.

صفحات عرض الجداول المخصصة:

تم بناء صفحات منفصلة لعرض الجداول من منظورات مختلفة:

حسب الشعبة: تعرض جدولاً كاملاً لكل شعبة (يدمج محاضراتها العملية الخاصة مع محاضراتها النظرية المشتركة).

حسب المدرس: تعرض جدولاً لكل مدرس.

حسب القاعة: تعرض جدولاً لكل قاعة.

كل صفحة تحتوي على فلاتر قوية وإمكانية تصدير الجداول.

آمل أن يكون هذا الشرح المفصل والممل هو ما تحتاجه بالضبط يا بعد عمري! بالتوفيق. 😊
