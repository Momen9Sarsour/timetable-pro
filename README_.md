
مشروع نظام الجدولة الآلي باستخدام الخوارزمية الجينية
ملخص التقدم والإنجازات (الجزء العملي)

يهدف هذا المستند إلى توضيح ما تم إنجازه في الجانب العملي من مشروع نظام الجدولة الآلي. تم بناء بنية تحتية قوية ومتكاملة باستخدام Laravel Framework، مع التركيز على المرونة، ودقة البيانات، وتجربة المستخدم السهلة، لتكون أساساً صلباً للمرحلة القادمة وهي تطبيق الخوارزمية الجينية.

أولاً: إدارة البيانات الأساسية (Data Management Units)

تم بناء وحدات تحكم (CRUD - Create, Read, Update, Delete) متكاملة للويب و API لكل المكونات الأساسية للنظام. تتميز هذه الوحدات بالمرونة والذكاء في التعامل مع البيانات.

1. الأقسام (Departments)

الإنجاز: بناء وحدة تحكم كاملة لإدارة الأقسام الأكاديمية (مثل "قسم الحاسوب"، "قسم الهندسة").

المميزات:

واجهة ويب و API: إمكانية إضافة، عرض، تعديل، وحذف الأقسام.

رفع بالجملة (Excel): ميزة قوية تسمح باستيراد قائمة كاملة بالأقسام من ملف Excel، مما يوفر وقتاً هائلاً في الإدخال الأولي.

تحديث ذكي: عند الرفع من Excel، يقوم النظام بالتحقق من "رقم القسم" (department_no). إذا كان موجوداً مسبقاً، يتم تحديث بياناته (مثل الاسم) بدلاً من إنشاء سجل مكرر، مما يضمن سلامة البيانات.

2. أنواع وفئات البيانات (Room Types, Subject Types, Subject Categories)

الإنجاز: تم بناء وحدات CRUD منفصلة لكل من:

أنواع القاعات: لتصنيف القاعات (مثلاً: "قاعة محاضرات"، "مختبر حاسوب").

أنواع المواد: لتصنيف المواد أكاديمياً (مثلاً: "متطلب جامعة إجباري"، "متطلب قسم اختياري").

فئات المواد: لتصنيف طبيعة المادة (مثلاً: "نظري"، "عملي"، "نظري وعملي").

المميزات:

مرونة النظام: تسمح للمسؤول بتعريف تصنيفات جديدة بسهولة في المستقبل دون الحاجة لأي تعديل برمجي.

بيانات منظمة: تضمن أن كل القاعات والمواد لها تصنيف واضح وموحد، وهو أمر حاسم لعمل الخوارزمية (مثلاً، لتعيين محاضرة عملية لمختبر).

رفع بالجملة (Excel): كل وحدة تدعم استيراد البيانات من Excel.

3. القاعات (Rooms)

الإنجاز: وحدة CRUD متكاملة لإدارة كل قاعة ومختبر في الكلية.

المميزات:

بيانات شاملة: يمكن تخزين كل تفاصيل القاعة: رقمها، اسمها، سعتها القصوى من الطلاب (room_size)، نوعها (من قائمة Room Types)، الفرع، وتخصيصها حسب الجنس.

أساس لتوزيع الشعب: حقل "سعة القاعة" هو مدخل أساسي للخوارزمية الجينية لضمان عدم وضع شعبة بعدد طلاب أكبر من سعة القاعة.

4. المواد الدراسية (Subjects)

الإنجاز: وحدة CRUD متقدمة لإدارة المواد الدراسية، وهي قلب المنهج الأكاديمي.

المميزات:

تفاصيل دقيقة: تخزين رقم المادة، اسمها، ساعاتها المعتمدة، وساعاتها الأسبوعية مقسمة (نظري وعملي).

سعة الشعبة المخصصة (ميزة جوهرية): تم إضافة حقلين في جدول المواد (capacity_theoretical_section و capacity_practical_section) للسماح للمسؤول بتحديد السعة القصوى للشعبة النظرية والعملية لكل مادة على حدة. هذا يعطي مرونة هائلة لعملية تقسيم الشعب ويجعلها أكثر واقعية. إذا لم يتم تحديدها، يستخدم النظام قيماً افتراضية.

5. الخطط الدراسية وإدارة موادها (Plans & Plan Subjects Management)

الإنجاز: نظام متكامل من جزأين لإدارة الخطط الدراسية وتوزيع المواد عليها.

المميزات:

إدارة شاملة: واجهات لإدارة الخطط الأساسية، وصفحة تفصيلية لتوزيع المواد على كل مستوى وفصل دراسي داخل الخطة.

رفع بالجملة ذكي (Excel): ميزة قوية تسمح برفع مواد خطة معينة من ملف واحد.

مرونة في الإدخال: النظام يتعامل مع مدخلات مختلفة في ملف الإكسل (ID، رقم، أو اسم) للمادة والخطة والمستوى والفصل.

معالجة نصوص متقدمة: يتجاهل النظام حالة الأحرف الإنجليزية والهمزات المختلفة في اللغة العربية عند البحث، مما يمنع الأخطاء والتكرار.

تقارير أخطاء واضحة: بعد الرفع، يقدم النظام تقريراً مفصلاً بعدد السجلات التي تم إنشاؤها، وعدد التي كانت موجودة، وتفاصيل عن أي صفوف تم تجاهلها وسبب التجاهل.

6. الفترات الزمنية (Timeslots)

الإنجاز: وحدة لإدارة شبكة الأسبوع الدراسي (الأوقات المتاحة للمحاضرات).

المميزات:

توليد آلي: زر مخصص يسمح للمستخدم بتوليد كل الفترات الزمنية للأسبوع بضغطة زر، عن طريق تحديد أيام الدوام، ووقت البدء والنهاية، ومدة المحاضرة والاستراحة.

منع التداخل: عند الإضافة أو التعديل اليدوي، يتحقق النظام من عدم وجود أي تداخل زمني بين الفترات، مما يضمن سلامة البيانات.

ثانياً: التحضير للجدولة (إدارة الشعب والتعيينات)

تم بناء الوحدات التي تترجم التخطيط الأكاديمي إلى مدخلات جاهزة للخوارزمية.

7. تعيين المدرسين للمواد والشعب (Instructor Subject & Section Assignments)

الإنجاز: تم بناء آليتين متكاملتين ومرنتين لتوزيع العبء التدريسي.

المميزات:

تعيين المواد (عام): واجهة لتحديد مجموعة المواد التي يستطيع كل مدرس تدريسها.

تعيين الشعب (مفصل): واجهة احترافية تسمح بتعيين شعب محددة لمدرس معين، مما يسمح لمدرسين مختلفين بتدريس شعب مختلفة لنفس المادة.

منع التعارض: الواجهة تمنع تعيين شعبة معينة مسبقاً لمدرس آخر.

رفع بالجملة (Excel): لدعم تعيين المواد للمدرسين بشكل سريع.

8. الأعداد المتوقعة للطلاب (PlanExpectedCounts)

الإنجاز: وحدة CRUD لإدخال الأعداد التقديرية للطلاب لكل خطة ومستوى وفصل وسنة.

المميزات:

أساس التقسيم: هذه البيانات هي المدخل الرئيسي لعملية إنشاء الشعب.

نقطة انطلاق لإدارة الشعب: من هذه الواجهة، يمكن للمستخدم الانتقال مباشرة لإدارة شعب السياق المحدد.

9. إدارة الشعب (Sections) - (آلية متكاملة)

الإنجاز: آلية قوية لتحديد وإنشاء شعب المواد، وهي الخطوة الأخيرة قبل توليد الجدول.

المميزات:

تقسيم آلي ذكي: بناءً على الأعداد المتوقعة للطلاب، يقوم النظام تلقائياً باقتراح تقسيم للشعب.

يعتمد على سعة المادة: يستخدم السعة المحددة لكل مادة (النظرية والعملية) أو القيم الافتراضية.

منطق لتجنب الشعب الصغيرة: يحاول النظام دمج الطلاب وتجنب إنشاء شعب بعدد قليل جداً من الطلاب.

فصل الأنشطة: للمواد "النظرية والعملية"، يقوم النظام بإنشاء شعب نظرية (عادةً شعبة واحدة كبيرة) وشعب عملية (عدة شعب صغيرة) بشكل منفصل للمادة نفسها.

تحكم كامل للمستخدم: بعد التوليد الآلي، يمكن لرئيس القسم مراجعة كل شعبة وتعديل عدد طلابها، أو حذفها، أو إضافة شعب جديدة يدوياً عبر واجهة تحكم تفصيلية وواضحة.

التحقق من التجاوز: عند التعديل أو الإضافة اليدوية، يتحقق النظام من أن المجموع الكلي لطلاب الشعب لا يتجاوز العدد الإجمالي المتوقع.

ثالثاً: الخوارزمية الجينية والنتائج (الجزء المنجز)

✅ بناء هياكل البيانات: تم إنشاء كل الجداول (Populations, Chromosomes, Genes...) والموديلات والعلاقات اللازمة لعمل وتخزين نتائج الخوارزمية الجينية.

✅ واجهة التحكم بالخوارزمية: تم تصميم واجهة Dashboard تحتوي على زر لبدء عملية الجدولة، مع مودال يسمح للمستخدم بتحديد إعدادات الخوارزمية (حجم التجمع، عدد الأجيال، معدل الطفرة، طرق التزاوج والاختيار).

✅ التشغيل في الخلفية (Queues & Jobs): تم تطبيق نظام الطوابير في Laravel لتشغيل الخوارزمية في الخلفية. هذا يمنع تجميد واجهة المستخدم ويحل مشكلة انتهاء مهلة التنفيذ (Maximum execution time exceeded).

✅ الهيكل الأساسي للخوارزمية (GeneticAlgorithmService):

إنشاء الجيل الأول: النظام قادر على إنشاء جيل أول من الجداول العشوائية بذكاء (يراعي نوع القاعة وتخصص المدرس).

تقييم الجودة (Fitness Function): تم بناء دالة تقييم قوية تحسب "درجة العقوبة" لكل جدول بناءً على تعارضات (المدرسين، القاعات، الشعب، سعة القاعة، نوع القاعة، أهلية المدرس).

التطور (الاختيار، التزاوج، الطفرة): تم بناء حلقة الأجيال التي تقوم باختيار أفضل الحلول (Tournament Selection)، وتزويجها لإنتاج حلول جديدة (Single-Point Crossover)، وإجراء طفرات ذكية عليها.

✅ عرض النتائج:

تم بناء صفحة لعرض أفضل 5 حلول من آخر عملية تشغيل ناجحة.

تم بناء صفحة لعرض تفصيلي لأي جدول يتم اختياره، مع تلوين المحاضرات المتعارضة باللون الأحمر وتوضيح سبب التعارض.

تم بناء صفحات لعرض الجداول النهائية من منظور الشعب، المدرسين، والقاعات، مع الأخذ في الاعتبار المحاضرات المشتركة والمنفصلة.

